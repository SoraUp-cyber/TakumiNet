<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../src/footer.css">
    <link rel="stylesheet" href="../src/index.css">
    <link rel="stylesheet" href="../src/nav.css">
  <title>Crear Game Jam - TakumiNet</title>
  <style>
.jam-creation-container {
  max-width: 850px;
  margin: 2rem auto;
  padding: 2rem;
  border-radius: 20px;
  width: 200%;
  color: #ffffff;
  background: #1e1e1e;
  font-family: 'Inter', sans-serif;
}

.jam-creation-header h1 {
  font-size: 2rem;
  margin-bottom: 2rem;
  text-align: center;
  padding-bottom: 1rem;
  border-bottom: 2px solid #00ff80;
  color: #00ff80;
}

.jam-creation-form {
  display: grid;
  gap: 1.5rem;
}

.form-label {
  display: block;
  margin-bottom: 0.5rem;
  color: #b3ffcc;
  font-weight: 600;
  font-size: 1rem;
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 0.8rem;
  border: 1px solid #333;
  border-radius: 8px;
  background: #2b2b2b;
  color: #ffffff;
  transition: all 0.3s ease;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  border-color: #00ff80;
  box-shadow: 0 0 5px rgb(30, 255, 0);
  outline: none;
}

.form-input-file {
  width: 100%;
  padding: 1rem;
  border: 2px dashed #444;
  border-radius: 8px;
  background: #2a2a2a;
  color: #ffffff;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.form-input-file:hover {
  background-color: #333;
  border-color: #00ff80;
}

.form-checkbox {
  width: 18px;
  height: 18px;
  accent-color: #00ff80;
  margin-right: 0.5rem;
  vertical-align: middle;
}

.form-submit-btn {
  background: #00ff80;
  color: #000000;
  border: none;
  padding: 1rem 2rem;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  width: 100%;
}

.form-submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 255, 128, 0.3);
}

@media (max-width: 768px) {
  .jam-creation-container {
    padding: 1.5rem;
    margin: 1rem;
  }

  .jam-creation-header h1 {
    font-size: 1.75rem;
  }

  .jam-creation-form {
    gap: 1rem;
  }
}

/* Personalización de select */
select.form-select {
  appearance: none;
  background: #2b2b2b;
  background-image: url("data:image/svg+xml,%3Csvg fill='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  background-size: 1em;
  padding-right: 3rem;
}

/* Archivo específico */
#imagen-portada.form-input-file {
  max-width: 500px;
  height: 60px;
  font-size: 1rem;
}

#imagen-portada.form-input-file:hover {
  background-color: #3a3a3a;
  border-color: #00ff80;
}

#visibilidad.form-select {
  border: 1px solid #444;
  background: #2b2b2b;
  color: #ffffff;
}

#visibilidad.form-select:focus {
  border-color: #00ff80;
  box-shadow: 0 0 0 3px rgba(0, 255, 128, 0.3);
}




/* Animación para el alert de confirmación */
.alert-success {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 15px 25px;
  background: linear-gradient(135deg, #4CAF50, #2E7D32);
  color: white;
  border-radius: 8px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  z-index: 1000;
  opacity: 0;
  transform: translateX(100%);
  animation: slideIn 0.5s forwards, fadeOut 0.5s forwards 3s;
  display: flex;
  align-items: center;
  gap: 10px;
}

.alert-success::before {
  content: "✓";
  font-size: 1.5em;
}

@keyframes slideIn {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeOut {
  to {
    opacity: 0;
    transform: translateX(20px);
  }
}

/* Efecto de pulso en el texto del ID */
.jam-id {
  font-weight: bold;
  animation: pulseText 1.5s infinite;
  display: inline-block;
  margin-left: 5px;
}

@keyframes pulseText {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); color: #FFEB3B; }
  100% { transform: scale(1); }
}
  </style>
</head>
<body>
<nav class="navbar">
    <!-- Sección Izquierda: Logo -->
    <div class="navbar-logo">
        <img src="../assets/img/logo.png" alt="Logo de TakumiNet">
    </div>

    <!-- Sección Central: Enlaces de navegación -->
    <ul class="nav-links">
      <li><a href="index.html" class="active" aria-current="page"><i class="fas fa-home"></i> <span data-i18n="inicio">Inicio</span></a></li>
      <li><a href="marketplace.html"><i class="fas fa-store"></i> <span data-i18n="tienda">Tienda</span></a></li>
      <li><a href="game jam.html"><i class="fas fa-calendar-alt"></i> <span data-i18n="game_jams">Game Jams</span></a></li>
      <li><a href="centro-aprendiz.html"><i class="fas fa-graduation-cap"></i> <span data-i18n="tutoriales">Tutoriales</span></a></li>
      <li><a href="ranking.html"><i class="fas fa-newspaper"></i> <span data-i18n="Noticias">Noticias</span></a></li>
      <li><a href="comunidad.html"><i class="fas fa-users"></i> <span data-i18n="comunidad">Comunidad</span></a></li>
    </ul>

    <!-- Sección Derecha: Elementos interactivos -->
    <div class="nav-right">
      <!-- Búsqueda -->
      <form class="search-box" role="search">
        <input type="search" class="search-input" placeholder="Buscar juegos, usuarios..." aria-label="Buscar en el sitio" data-i18n="buscar" data-i18n-type="placeholder">
        <button type="submit" class="search-btn" aria-label="Ejecutar búsqueda">
          <i class="fas fa-search"></i>
        </button>
      </form>

      <!-- Iconos de notificaciones -->
      <div class="nav-icons">
        <div class="notification-wrapper">
          <button class="icon-btn notification-btn" onclick="toggleNotifications()" aria-haspopup="true" aria-expanded="false" aria-label="Notificaciones">
            <i class="fas fa-bell"></i>
            <span class="notification-badge" id="notificationBadge" aria-live="polite">0</span>
          </button>

          <!-- Menú desplegable de notificaciones -->
          <div class="dropdown-menu notification-dropdown" id="notificationDropdown" role="menu" aria-hidden="true" style="display:none;">
            <div class="dropdown-header">
              <h4 class="dropdown-title" data-i18n="notificaciones">Notificaciones</h4>
              <button class="mark-read" id="markReadBtn" data-i18n="ver_todas">Marcar todas como leídas</button>
            </div>

            <div class="notifications-list" id="notificationsList">
              <!-- Aquí se insertarán las notificaciones dinámicamente -->
            </div>
            <div class="dropdown-footer">
              <a href="/notificaciones" class="view-all" data-i18n="ver_todas">Ver todas</a>
            </div>
          </div>
        </div>

        <!-- Carrito de compras -->
        <div class="icon-btn cart-btn" aria-label="Carrito de compras" role="button" tabindex="0" onclick="toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-badge" aria-live="polite">5</span>
        </div>

        <!-- Menú de usuario -->
        <div class="user-menu">
          <button class="user-profile" aria-haspopup="true" aria-expanded="false" onclick="toggleUserMenu()">
            <div class="avatar">
              <i class="fas fa-user"></i>
            </div>
            <span class="username" id="mostrarNombre">Invitado</span>
          </button>

          <!-- Menú desplegable de usuario -->
          <div class="user-dropdown" id="userDropdown" role="menu" aria-hidden="true">
            <div class="dropdown-group">
              <a href="perfil del usuario.html" class="menu-item"><i class="fas fa-user"></i><span data-i18n="perfil">Perfil</span></a>
              <a href="mis juegos.html" class="menu-item"><i class="fas fa-gamepad"></i><span data-i18n="mis_juegos">Mis Juegos</span></a>
              <a href="juegos favoritos.html" class="menu-item"><i class="fas fa-heart"></i><span data-i18n="favoritos">Favoritos</span></a>
              <a href="Creator Dashboard.html" class="menu-item"><i class="fas fa-tachometer-alt"></i><span data-i18n="dashboard">Dashboard</span></a>
              <a href="subir_juegos.html" class="menu-item"><i class="fas fa-upload"></i><span data-i18n="subir_juego">Subir Juego</span></a>
            </div>
            <div class="dropdown-group">
              <a href="biblioteca.html" class="menu-item"><i class="fas fa-book"></i><span data-i18n="biblioteca">Biblioteca</span></a>
              <a href="descarga.html" class="menu-item"><i class="fas fa-download"></i><span data-i18n="descargas">Descargas</span></a>
            </div>
            <hr class="divider">
            <div class="dropdown-group">
              <a href="configuracion.html" class="menu-item"><i class="fas fa-cog"></i><span data-i18n="configuracion">Configuración</span></a>
              <a href="perfil-editar.html" class="menu-item"><i class="fas fa-user-edit"></i><span data-i18n="editar_usuario">Editar Usuario</span></a>
              <a href="pagos-desarrollador.html" class="menu-item"><i class="fas fa-star"></i><span data-i18n="suscripcion">Suscripción</span></a>
              <a href="seguidos.html" class="menu-item"><i class="fas fa-heart"></i><span data-i18n="seguidos">Seguidos</span></a>
            </div>
            <hr class="divider">
            <div class="dropdown-group">
              <button class="menu-item logout"><i class="fas fa-sign-out-alt"></i><span data-i18n="cerrar_sesion">Cerrar Sesión</span></button>
            </div>
          </div>
        </div>
      </div>
    </div>
</nav>

 <div class="jam-creation-container">
  <div class="jam-creation-header">
    <h1 data-i18n="jam.createTitle">Crear Game Jam</h1>
  </div>

  <div class="jam-creation-form">
    <form action="Crear Game Jam.html" method="POST">

      <!-- Título del Evento -->
      <label for="titulo" class="form-label" data-i18n="jam.eventTitle">Título del Evento</label>
      <input type="text" id="titulo" name="titulo" class="form-input" required>

      <!-- Descripción corta -->
      <label for="descripcion-corta" class="form-label" data-i18n="jam.shortDescription">Descripción corta</label>
      <input type="text" id="descripcion-corta" name="descripcion-corta" class="form-input" required>

      <!-- URL -->
      <label for="url" class="form-label" data-i18n="jam.eventUrl">URL del Evento</label>
      <input type="url" id="url" name="url" class="form-input" required>

      <!-- Tipo de Game Jam -->
      <label for="tipo-jam" class="form-label" data-i18n="jam.type">Tipo de Jam</label>
      <select id="tipo-jam" name="tipo-jam" class="form-select" required>
        <option value="no-ranking" data-i18n="jam.noRanking">No clasificado</option>
        <option value="ranking" data-i18n="jam.ranking">Clasificado</option>
      </select>

      <!-- Configuración de Votación -->
      <label for="quien-vota" class="form-label" data-i18n="jam.whoVotes">¿Quién puede votar?</label>
      <select id="quien-vota" name="quien-vota" class="form-select" required>
        <option value="solo-submisores" data-i18n="jam.onlySubmitters">Solo los submisores</option>
        <option value="submisores-contribuidores" data-i18n="jam.submittersContributors">Submisores y colaboradores</option>
        <option value="jueces" data-i18n="jam.judgesOnly">Solo los jueces</option>
        <option value="publico" data-i18n="jam.everyone">Cualquiera</option>
      </select>

      <!-- Fechas del Evento -->
      <label for="fecha-inicio" class="form-label" data-i18n="jam.startDate">Fecha de inicio</label>
      <input type="datetime-local" id="fecha-inicio" name="fecha-inicio" class="form-input" required>

      <label for="fecha-fin" class="form-label" data-i18n="jam.endDate">Fecha de finalización</label>
      <input type="datetime-local" id="fecha-fin" name="fecha-fin" class="form-input" required>

      <label for="fecha-votacion" class="form-label" data-i18n="jam.votingEndDate">Fecha de fin de votación</label>
      <input type="datetime-local" id="fecha-votacion" name="fecha-votacion" class="form-input" required>

      <!-- Imagen de portada -->
      <label for="imagen-portada" class="form-label" data-i18n="jam.coverImage">Imagen de portada</label>
      <input type="file" id="imagen-portada" name="imagen-portada" class="form-input-file" accept="image/*" required>

      <!-- Contenido del Evento -->
      <label for="contenido" class="form-label" data-i18n="jam.content">Contenido</label>
      <textarea id="contenido" name="contenido" class="form-textarea" rows="4" required></textarea>

      <!-- Criterios de Ranking -->
      <label for="criterios" class="form-label" data-i18n="jam.rankingCriteria">Criterios de clasificación</label>
      <input type="text" id="criterios" name="criterios" class="form-input">

      <!-- Hashtag -->
      <label for="hashtag" class="form-label" data-i18n="jam.hashtag">Hashtag en redes sociales (opcional)</label>
      <input type="text" id="hashtag" name="hashtag" class="form-input">

      <!-- Opciones adicionales -->
      <label for="comunidad" class="form-label" data-i18n="jam.enableCommunity">Habilitar comunidad</label>
      <input type="checkbox" id="comunidad" name="comunidad" class="form-checkbox">

      <label for="bloquear-subidas" class="form-label" data-i18n="jam.blockUploads">Bloquear nuevas subidas durante la votación</label>
      <input type="checkbox" id="bloquear-subidas" name="bloquear-subidas" class="form-checkbox">

      <label for="ocultar-resultados" class="form-label" data-i18n="jam.hideResults">Ocultar resultados hasta el final</label>
      <input type="checkbox" id="ocultar-resultados" name="ocultar-resultados" class="form-checkbox">

      <label for="ocultar-submisiones" class="form-label" data-i18n="jam.hideSubmissions">Ocultar submisiones antes de terminar</label>
      <input type="checkbox" id="ocultar-submisiones" name="ocultar-submisiones" class="form-checkbox">

      <!-- Visibilidad -->
      <label for="visibilidad" class="form-label" data-i18n="jam.visibility">Visibilidad</label>
      <select id="visibilidad" name="visibilidad" class="form-select" required>
        <option value="publicada" data-i18n="jam.published">Publicado</option>
        <option value="no-publicada" data-i18n="jam.unpublished">No publicada</option>
      </select>

      <!-- Botón -->
      <button type="submit" class="form-submit-btn" data-i18n="jam.createBtn">Crear Evento</button>
    </form>
  </div>
</div>

<script src="../js/notificacion.js"></script>
<script src="../js/carrito.js"></script>
<script src="../js/user.js"></script>
<script src="../js/desplegar.js"></script>
<script src="../js/cerrar sesion.js"></script>
<script src="../cookies.js"></script>
<script src="../js/usario.js"></script>
<script src="../js/i18n.js"></script>
<script src="../autoSync.js"></script>
<script src="../script.js"></script>

</body>
</html>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.querySelector('.jam-creation-form form');
  const imagenPortadaInput = document.getElementById('imagen-portada');
  
  imagenPortadaInput.addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        console.log("Imagen convertida a Base64");
      };
      reader.readAsDataURL(file);
    }
  });

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const file = imagenPortadaInput.files[0];
    let imagenBase64 = '';
    
    if (file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        imagenBase64 = event.target.result;
        saveJamData(imagenBase64);
      };
      reader.readAsDataURL(file);
    } else {
      saveJamData(imagenBase64);
    }
  });

  function saveJamData(imagenBase64) {
    // Generar ID numérico único para la nueva Jam
    const jamId = generateNumericId();
    
    const formData = {
      id: jamId, // Ahora será solo número
      titulo: document.getElementById('titulo').value,
      descripcionCorta: document.getElementById('descripcion-corta').value,
      url: document.getElementById('url').value,
      tipoJam: document.getElementById('tipo-jam').value,
      quienVota: document.getElementById('quien-vota').value,
      fechaInicio: document.getElementById('fecha-inicio').value,
      fechaFin: document.getElementById('fecha-fin').value,
      fechaVotacion: document.getElementById('fecha-votacion').value,
      imagenPortada: imagenBase64,
      contenido: document.getElementById('contenido').value,
      criterios: document.getElementById('criterios').value,
      hashtag: document.getElementById('hashtag').value,
      comunidad: document.getElementById('comunidad').checked,
      bloquearSubidas: document.getElementById('bloquear-subidas').checked,
      ocultarResultados: document.getElementById('ocultar-resultados').checked,
      ocultarSubmisiones: document.getElementById('ocultar-submisiones').checked,
      visibilidad: document.getElementById('visibilidad').value,
      fechaCreacion: new Date().toISOString()
    };

    let jams = JSON.parse(localStorage.getItem('jams')) || [];
    jams.push(formData);
    localStorage.setItem('jams', JSON.stringify(jams));
    
    const alertElement = document.createElement('div');
    alertElement.className = 'alert-success';
    alertElement.innerHTML = `
      Game Jam creada exitosamente con ID: <span class="jam-id">${jamId}</span>
    `;
    document.body.appendChild(alertElement);

    setTimeout(() => {
      alertElement.remove();
    }, 3500);

    form.reset();
  }

  // Función para generar ID numérico único
  function generateNumericId() {
    return Date.now(); // Solo usamos el timestamp numérico
  }
});
</script>
